<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->


<<link rel="import" href="../element/my-liste_famillemembres.html">
<link rel="import" href="../element/my-liste_famillesejours.html">
<link rel="import" href="../element/my-liste_compte_ecritures.html">
<link rel="import" href="../element/my-liste_factures.html">

<link rel="import" href="../majcore/my-combo_select.html">
<link rel="import" href="../majcore/my-groupprofil_behavior.html">

<dom-module id="my-profilfamille">

  <template>
		<style>
	  		 :host {
				/*display:flex;*/
				display: block;
	          --app-grid-columns: 2;
	          --app-grid-gutter: 10px;
	          --app-grid-expandible-item-columns: 6;
	          --paper-icon-button-ink-color: white;
	          margin-top :2px;
	          margin-bottom:2px;
	        }
		     .profil {
		     	min-width: 350px;
		     	max-width:500px;
		     }
		     .listemembre {
		     	/*margin : 5px auto;*/
		     	min-width: 350px;
		     }
		     .listesejour {
		     	margin-top : 25px;
		     	
		     	min-width: 350px;
		     }
		     .listefacture {
		     	margin-top : 25px;
		     	
		     	min-width: 350px;
		     }
  		</style>




  	 	<my-profil_behavior 
	  		table_code="personne" 
	  		params_get="{{params_get}}"
	  		params_save="{{params_save}}"
	  		params_delete="{{params_delete}}"
	  		edited_item_id="{{edited_item_id}}"
  	 	 	objet="{{objet}}" 
  	 	 	obj_id="{{objet.id}}"
  	 	 	grants_acces="{{grants_acces}}"
  	 	 	hideother_onedit="{{hideother_onedit}}"
  	 	 	hideothereditbutton_onedit="{{hideothereditbutton_onedit}}"
  	 	 	return_onsave=true
  		> 
  		

	  		
	  		<div class="reduit">
					Famille {{objet.nom}} {{objet.prenom1}}<div style="float:right;margin-right:110px">Solde : {{soldecompta}}</div>
					</br>
					Adresse {{objet.adresse}} {{objet.codepostal}} {{objet.ville}} {{objet.pays}}</br>
					
					{{objet.commentaire}}
					
	  		</div>
	  		<div class="edition" style="display:flex">
	  			<li style="display:block;max-width:1000px;margin:auto;margin-top:-40px">
					<my-groupprofil_behavior title="Titulaire">
						<div class="inforofil">
						    <paper-input id="id" label="id" hidden type="text" value="{{objet.id}}"> </paper-input>
						    <paper-input id="uuid" label="uuid" hidden type="text" value="{{objet.uuid}}">     </paper-input>              
							<div class="ligne">
							   	<paper-input class="input2cols" id="nom" label="Nom" type="text" value="{{objet.nom}}"> 
					            </paper-input>
					           <!--  <my-liste_sexes dropdowntype dropdown_selobj="{{dropdown_selobj}}" class="input1col" id="sexe" label="Genre" value_sel="{{objet.sexe}}"></my-liste_sexes> -->
					            <my-combo_select  dropdown_selobj="{{dropdown_selobj}}" class="input1col" table="sexe" id="sexe" label="Genre" value_sel="{{objet.sexe}}"></my-combo_select>
							</div>
							<div class="ligne">
							    <paper-input class="input1col" id="prenom1" label="Prenom1" type="text" value="{{objet.prenom1}}"></paper-input>
					            <paper-input class="input1col" id="prenom2" label="Prenom2" type="text" value="{{objet.prenom2}}"></paper-input>
					            <paper-input class="input1col" id="prenom3" label="Prenom3" type="text" value="{{objet.prenom3}}"></paper-input>
							</div>
							<div class="ligne">
					            <paper-input class="input3cols" id="adresse" label="Adresse" type="text" value="{{objet.adresse}}"></paper-input>
					        </div>
					        <div class="ligne">
					        	<paper-input class="input1col" id="pays" label="Pays" type="text" value="{{objet.pays}}"><iron-icon icon="social:public" prefix></paper-input>
					            <paper-input class="input1col" id="codepostal" label="Code Postal" type="number" value="{{objet.codepostal}}"></paper-input>
					            <paper-input class="input1col" id="ville" label="Ville" type="text" value="{{objet.ville}}"></paper-input>
					        </div>
					        <div class="ligne">
					            <paper-input class="input1col" id="phone" label="Telephone" type="text" value="{{objet.phone}}"><iron-icon icon="communication:phone" prefix></iron-icon></paper-input>
					            <paper-input class="input1col" id="email" label="Courriel" type="text" value="{{objet.email}}"><iron-icon icon="communication:email" prefix></iron-icon></paper-input>
					            <paper-input class="input1col" id="profession" label="Profession" type="text" value="{{objet.profession}}"></paper-input>
					        </div>
					        <div class="ligne">
					            <paper-input class="input1col" id="datenaissance" label="Date de naissance" type="date" value="{{objet.datenaissance}}"><iron-icon icon="event-available" prefix></iron-icon></paper-input>
					            <paper-input class="input2cols" id="lieunaissance" label="Lieu de naissance" type="text" value="{{objet.lieunaissance}}"></paper-input>
					        </div>
					        <div class="ligne">
					            <paper-input class="input2cols" id="cartegrise" label="NÂ° Carte grise" type="text" value="{{objet.cartegrise}}"><iron-icon icon="airport-shuttle" prefix></iron-icon></paper-input>
					            <paper-input class="input1col" id="immatriculation" label="Immatriculation" type="text" value="{{objet.immatriculation}}"></paper-input>
					        </div>
					        <div class="ligne">
					            <paper-input class="input3cols" id="commentaire" label="Commentaires" type="textarea" value="{{objet.commentaire}}"></paper-input>
					        </div> 
						</div>
					</my-groupprofil_behavior>
				</li>
				<li style="display:block;width:1000px;margin-left:auto;margin-right:auto;margin-top:-40px;margin-bottom:0">
					<my-liste_compte_ecritures class="card cardprinc listecompteur" addable="{{sous_table_addable}}" solde="{{soldecompta}}" titulaire="{{objet}}" seltitulaire="{{objet.id}}"  ></my-liste_compte_ecritures>
					<my-liste_factures class="card cardprinc listefacture" addable="{{sous_table_addable}}" titulaire="{{objet}}" seltitulaire="[[selitem]]" ></my-liste_factures>
					<my-liste_famillesejours class="card cardprinc listesejour" addable="{{sous_table_addable}}" titulaire="{{objet}}" seltitulaire="[[selitem]]"  ></my-liste_famillesejours>
					<my-liste_famillemembres class="card cardprinc listemembre" addable="{{sous_table_addable}}" titulaire="{{objet}}" seltitulaire="[[selitem]]"></my-liste_famillemembres>
				</li>
				</div>				 	
	  		
  		</my-profil_behavior>
	  		
  </template>
  <script>
  Polymer({

	  is: 'my-profilfamille',
	  
	  properties: {  

	  	 params_get:{type: Object,
		   	 	  notify : true,
		   	 	  computed:'_getparams_get(objet.id,objet)'
		     },
	     params_save:{type: Object,
	   	 	  notify : true,
	   	 	  value: {body:{},params:{action:'save',type:'maj',element:'personne'/*v:'voyage.1.1.1'*/}}
	        },
	     params_delete:{type: Object,
	   	 	  notify : true,
	   	 	  value: {body:{},params:{action:'delete',type:'maj',element:'personne'/*v:'voyage.1.1.1'*/}}
	        },
	     edited_item_id:{notify : true},
	     
	     doc_print_link:{type:String,
	    	 notify:true,
	    	 computed:'_getprintlink(objet)'}
	     
	  },

	  _getprintlink:function(objet){
		  if (objet && objet.id) {
			  return "doc_famille&id="+objet.id;
		  } else {
			  return null;
		  }
		  
	  },
	  _getparams_get:function(obj_id,objet){
		  return {type:'get',action:'detailpersonne',id:obj_id}
	  },

  });
  
  </script>

</dom-module>
		